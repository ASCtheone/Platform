---
- name: Download cases repository
  git:
    repo: https://github.com/DigitalState/Cases.git
    version: '{{ cases_repository_version }}'
    dest: '{{ cases_repository_directory }}'

- name: Start cases container
  shell: 'docker-compose -f {{ cases_repository_directory }}/docker-compose.yml up -d'
  register: output
  changed_when: output.stderr != '%s_db_1 is up-to-date\n%s_php_1 is up-to-date\n%s_nginx_1 is up-to-date'.replace('%s', cases_repository_directory|basename)
