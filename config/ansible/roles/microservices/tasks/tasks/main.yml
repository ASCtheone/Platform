---
- name: Download tasks repository
  git:
    repo: https://github.com/DigitalState/Tasks.git
    version: '{{ tasks_repository_version }}'
    dest: '{{ tasks_repository_directory }}'

- name: Start tasks container
  shell: 'docker-compose -f {{ tasks_repository_directory }}/docker-compose.yml up -d'
  register: output
  changed_when: output.stderr != '%s_db_1 is up-to-date\n%s_php_1 is up-to-date\n%s_nginx_1 is up-to-date'.replace('%s', tasks_repository_directory|basename)
