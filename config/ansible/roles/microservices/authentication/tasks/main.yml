---
- name: Download authentication repository
  git:
    repo: https://github.com/DigitalState/Authentication.git
    version: '{{ authentication_repository_version }}'
    dest: '{{ authentication_repository_directory }}'

- name: Start authentication container
  shell: 'docker-compose -f {{ authentication_repository_directory }}/docker-compose.yml up -d'
  register: output
  changed_when: output.stderr != '%s_db_1 is up-to-date\n%s_php_1 is up-to-date\n%s_nginx_1 is up-to-date'.replace('%s', authentication_repository_directory|basename)
