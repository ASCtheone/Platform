---
- block:
    - name: Define tasks mail variables
      set_fact:
        tasks_mail_transport: '{{ platform.mail.transport }}'
        tasks_mail_host: '{{ platform.mail.host }}'
        tasks_mail_port: '{{ platform.mail.port }}'
        tasks_mail_username: '{{ platform.mail.username }}'
        tasks_mail_password: '{{ platform.mail.password }}'
    - name: Configure tasks mail settings
      include_role:
        name: app/tasks/mail/configure
  when: app.tasks.enabled
  tags: [tasks]
