---
- block:
    - name: Define discovery dns variable
      set_fact:
        discovery_map:
          assets: '{{ app.assets.api.host }}'
          authentication: '{{ app.authentication.api.host }}'
          camunda: '{{ app.camunda.api.host }}/engine-rest'
          cases: '{{ app.cases.api.host }}'
          cms: '{{ app.cms.api.host }}'
          discovery: '{{ app.discovery.api.host }}'
          formio: '{{ app.formio.api.host }}'
          identities: '{{ app.identities.api.host }}'
          interactions: '{{ app.interactions.api.host }}'
          logs: '{{ app.logs.api.host }}'
          records: '{{ app.records.api.host }}'
          services: '{{ app.services.api.host }}'
          tasks: '{{ app.tasks.api.host }}'
          tenants: '{{ app.tenants.api.host }}'
          topics: '{{ app.topics.api.host }}'
    - name: Set discovery dns
      include_role:
        name: app/discovery/dns/configure
  when: app.discovery.enabled
  tags: [discovery]
