---
- name: Create jwt private and public keys
  hosts: platform
  become: true
  tasks:
    - name: Create jwt private key
      shell:
        cmd: 'openssl genrsa -out /root/resource/jwt/{{ env|replace(".", "/") }}/key -aes256 -passout pass:{{ jwt.pass_phrase }} 4096'
    - name: Create jwt private key
      shell:
        cmd: 'openssl rsa -pubout -in /root/resource/jwt/{{ env|replace(".", "/") }}/key -out /root/resource/jwt/{{ env|replace(".", "/") }}/key.pub -passin pass:{{ jwt.pass_phrase }}'
